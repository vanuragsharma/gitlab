<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * ||GEISSWEB| EU VAT Enhanced
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the GEISSWEB End User License Agreement
 * that is available through the world-wide-web at this URL: https://www.geissweb.de/legal-information/eula
 *
 * DISCLAIMER
 *
 * Do not edit this file if you wish to update the extension in the future. If you wish to customize the extension
 * for your needs please refer to our support for more information.
 *
 * @copyright   Copyright (c) 2015 GEISS WeblÃ¶sungen (https://www.geissweb.de)
 * @license     https://www.geissweb.de/legal-information/eula GEISSWEB End User License Agreement
 */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="RegisterWithVatNumberActionGroup">
        <arguments>
            <argument name="Customer" defaultValue="NewCustomerWithValidDomesticVatNumber"/>
        </arguments>

        <amOnPage url="{{StorefrontCustomerCreatePage.url}}" stepKey="goToCustomerAccountCreatePage"/>

        <waitForPageLoad stepKey="waitForPageLoaded"/>

        <fillField stepKey="fillFirstName" userInput="{{Customer.firstname}}" selector="{{StorefrontCustomerCreateFormSection.firstnameField}}"/>
        <fillField stepKey="fillLastName" userInput="{{Customer.lastname}}" selector="{{StorefrontCustomerCreateFormSection.lastnameField}}"/>
        <fillField stepKey="fillEmail" userInput="{{Customer.email}}" selector="{{StorefrontCustomerCreateFormSection.emailField}}"/>
        <fillField stepKey="fillPassword" userInput="{{Customer.password}}" selector="{{StorefrontCustomerCreateFormSection.passwordField}}"/>
        <fillField stepKey="fillConfirmPassword" userInput="{{Customer.password}}" selector="{{StorefrontCustomerCreateFormSection.confirmPasswordField}}"/>

        <fillField stepKey="fillCompany" userInput="{{Customer.company}}" selector="{{StorefrontRegisterCustomerWithAddressSection.companyField}}"/>
        <fillField stepKey="fillPhone" userInput="{{Customer.telephone}}" selector="{{StorefrontRegisterCustomerWithAddressSection.telephoneField}}"/>
        <fillField stepKey="fillPostcode" userInput="{{Customer.postcode}}" selector="{{StorefrontRegisterCustomerWithAddressSection.zipField}}"/>
        <fillField stepKey="fillCity" userInput="{{Customer.city}}" selector="{{StorefrontRegisterCustomerWithAddressSection.cityField}}"/>
        <fillField stepKey="fillStreetOne" userInput="{{Customer.street}}" selector="{{StorefrontRegisterCustomerWithAddressSection.streetFieldOne}}"/>
        <selectOption stepKey="selectCountry" selector="{{StorefrontRegisterCustomerWithAddressSection.countryField}}" userInput="{{Customer.country_id}}"/>

        <waitForElementVisible selector="{{StorefrontRegisterCustomerWithAddressSection.vatField}}" time="15" stepKey="waitForVatFieldLoaded"/>
        <fillField stepKey="fillVatId" userInput="{{Customer.vat_id}}" selector="{{StorefrontRegisterCustomerWithAddressSection.vatField}}"/>
        <wait stepKey="waitForValidationResult" time="15"/>

        <click stepKey="clickCreateAccountButton" selector="{{StorefrontCustomerCreateFormSection.createAccountButton}}"/>
    </actionGroup>

</actionGroups>
