<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * ||GEISSWEB| EU VAT Enhanced
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the GEISSWEB End User License Agreement
 * that is available through the world-wide-web at this URL: https://www.geissweb.de/legal-information/eula
 *
 * DISCLAIMER
 *
 * Do not edit this file if you wish to update the extension in the future. If you wish to customize the extension
 * for your needs please refer to our support for more information.
 *
 * @copyright   Copyright (c) 2015 GEISS WeblÃ¶sungen (https://www.geissweb.de)
 * @license     https://www.geissweb.de/legal-information/eula GEISSWEB End User License Agreement
 */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="StorefrontCustomerRegisterWithVatNumber">
        <annotations>
            <features value="Customer"/>
            <stories value="Create a Customer via the Storefront with a VAT number"/>
            <title value="VAT number should be validated and customer assigned to the correct group"/>
            <description value="VAT number should be validated and customer assigned to the correct group"/>
            <severity value="CRITICAL"/>
            <group value="customer"/>
            <group value="create"/>
            <testCaseId value="EUVAT_REG_WVV_DOMESTIC"/>
        </annotations>

        <before>
            <magentoCLI stepKey="enableAddressFieldsAtRegistration" command="config:set euvat/integration/show_address_on_regpage enabled" />
<!--            <createData entity="DE_Address_ValidVat_DBDS" stepKey="createDeAddressWithValidVatNumberDbDs"/>-->
        </before>

        <actionGroup ref="RegisterWithVatNumberActionGroup" stepKey="RegisterNewVatUser">
            <argument name="Customer" value="NewCustomerWithValidDomesticVatNumber"/>
        </actionGroup>
    </test>
</tests>